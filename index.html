<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Collezione di Vincenzo</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: sans-serif; -webkit-tap-highlight-color: transparent; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- IL TUO DATABASE ---
        const myCollection = [
            { id: 1, name: "Red-Eyes Darkness Dragon", code: "SGX3-ITB01", rarity: "Secret Rare", price: 0.21, image: "https://images.ygoprodeck.com/images/cards/96561011.jpg" },
            { id: 2, name: "Apprentice Magician", code: "SGX1-ITI05", rarity: "Secret Rare", price: 0.11, image: "https://images.ygoprodeck.com/images/cards/9156135.jpg" },
            { id: 3, name: "D.D. Crow", code: "SGX3-ITF10", rarity: "Secret Rare", price: 0.02, image: "https://images.ygoprodeck.com/images/cards/24508238.jpg" },
            { id: 4, name: "Elemental HERO Tempest", code: "SGX2-ITA21", rarity: "Secret Rare", price: 0.26, image: "https://images.ygoprodeck.com/images/cards/83121692.jpg" },
        ];

        const App = () => {
            const [searchTerm, setSearchTerm] = useState("");

            const filteredCards = myCollection.filter(card => 
                card.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                card.code.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const totalValue = useMemo(() => {
                return filteredCards.reduce((acc, card) => acc + card.price, 0).toFixed(2);
            }, [filteredCards]);

            return (
                <div className="min-h-screen pb-10">
                    <div className="sticky top-0 z-50 bg-slate-900/95 border-b border-slate-700 backdrop-blur-md p-4 shadow-xl">
                        <div className="max-w-4xl mx-auto">
                            <div className="flex justify-between items-center mb-4">
                                <h1 className="text-xl font-bold text-blue-400">
                                    <i className="fas fa-book-open mr-2"></i>Collezione
                                </h1>
                                <div className="text-right">
                                    <p className="text-xs text-slate-400">Valore Stimato</p>
                                    <p className="text-lg font-bold text-green-400">€ {totalValue}</p>
                                </div>
                            </div>
                            <div className="relative">
                                <i className="fas fa-search absolute left-3 top-3 text-slate-500"></i>
                                <input 
                                    type="text" 
                                    placeholder="Cerca per nome o codice..." 
                                    className="w-full bg-slate-800 text-white rounded-lg pl-10 pr-4 py-2 border border-slate-700 focus:outline-none focus:border-blue-500 transition-colors"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        {filteredCards.length > 0 ? (
                            filteredCards.map(card => (
                                <div key={card.id} className="card-hover bg-slate-800 rounded-xl overflow-hidden border border-slate-700 transition-all duration-300">
                                    <div className="relative aspect-[2/3]">
                                        <img src={card.image} alt={card.name} className="w-full h-full object-cover" loading="lazy" />
                                        <div className="absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold text-white border border-slate-600">
                                            {card.code}
                                        </div>
                                    </div>
                                    <div className="p-3">
                                        <h3 className="font-bold text-sm truncate text-white mb-1">{card.name}</h3>
                                        <div className="flex justify-between items-end">
                                            <span className="text-xs text-slate-400 bg-slate-900 px-2 py-0.5 rounded">{card.rarity}</span>
                                            <span className="font-bold text-green-400">€ {card.price.toFixed(2)}</span>
                                        </div>
                                    </div>
                                </div>
                            ))
                        ) : (
                            <div className="col-span-full text-center py-10 text-slate-500">
                                <p>Nessuna carta trovata.</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(() => console.log('SW Binder registrato!'))
                .catch((err) => console.log('Errore SW', err));
        }
    </script>
</body>
</html>
